---
// Ordered by most recent: Dec 2025 > Oct 2025 > May 2025
const achievements = [
  {
    title: 'Data Slayer 3.0',
    subtitle: 'Finalist',
    description: 'Machine Learning Competition focused on "Data for Sustainable & Inclusive Development" organized by HMSD Telkom University.',
    image: '/images/Ghefin Indra-DataSlayer_page-0001.jpg',
    date: 'December 2025',
    location: 'Telkom University',
  },
  {
    title: 'Sevent 9.0',
    subtitle: 'Finalist',
    description: 'External Software Development Competition with theme "Tech Meets Fun: Innovation, Competition, and Limitless Learning".',
    image: '/images/Ghefin Indra-SoftDev_page-0001.jpg',
    date: 'December 2025',
    location: 'Telkom University',
  },
  {
    title: 'IEEE ICSECS 2025',
    subtitle: 'Paper Presenter',
    description: 'Presented research paper on "Optimization Techniques for Enhancing ANN Performance in Network Intrusion Detection Using Differential Evolution" at IEEE 9th International Conference.',
    image: '/images/icsecs25-certificate_page-0001.jpg',
    date: 'October 2025',
    location: 'Pahang, Malaysia',
  },
  {
    title: 'Azure AI Fundamentals',
    subtitle: 'Microsoft Certified',
    description: 'Completed Preparation Course for Azure AI Fundamentals (AI-900) certification from Microsoft and ElevAIte program.',
    image: '/images/azure-ai900-cert.jpg',
    date: 'May 2025',
    location: 'Microsoft',
  },
];
---

<section id="achievements" class="py-20">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16 fade-in-up">
      <span class="text-primary font-bold tracking-wider text-sm uppercase">Recognition</span>
      <h2 class="mt-3 font-display text-3xl md:text-5xl font-bold text-text-main">Achievements & Certifications</h2>
      <p class="mt-4 text-text-muted text-lg max-w-2xl mx-auto">
        Recognized for excellence in AI, machine learning, and software development competitions.
      </p>
    </div>
    
    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
      {achievements.map((item, index) => (
        <div 
          class="group bg-white rounded-3xl overflow-hidden border border-gray-100 shadow-sm hover:shadow-soft-hover transition-all duration-300 fade-in-up cursor-pointer"
          onclick={`openLightbox(${index})`}
        >
          <!-- Certificate Image -->
          <div class="relative h-44 overflow-hidden">
            <img 
              src={item.image} 
              alt={item.title}
              class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
            />
            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
            <div class="absolute bottom-3 left-3">
              <span class="inline-block px-3 py-1 bg-primary text-white text-xs font-bold rounded-full">
                {item.subtitle}
              </span>
            </div>
            <!-- Click hint -->
            <div class="absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity">
              <span class="material-icons-round text-white bg-black/50 rounded-full p-1.5 text-sm">fullscreen</span>
            </div>
          </div>
          
          <!-- Content -->
          <div class="p-4">
            <h3 class="font-display font-bold text-base text-text-main mb-1">{item.title}</h3>
            <p class="text-text-muted text-xs mb-2 leading-relaxed">{item.description}</p>
            <div class="flex items-center gap-2 text-xs text-text-muted">
              <span class="material-icons-round text-sm">calendar_today</span>
              <span>{item.date}</span>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
  
  <!-- Lightbox Modal -->
  <div id="lightbox" class="fixed inset-0 z-[100] bg-black/90 hidden items-center justify-center p-4" onclick="closeLightbox()">
    <button class="absolute top-6 right-6 text-white hover:text-primary transition-colors z-10" onclick="closeLightbox()">
      <span class="material-icons-round text-4xl">close</span>
    </button>
    <button class="absolute left-6 top-1/2 -translate-y-1/2 text-white hover:text-primary transition-colors" onclick="event.stopPropagation(); prevImage()">
      <span class="material-icons-round text-4xl">chevron_left</span>
    </button>
    <button class="absolute right-6 top-1/2 -translate-y-1/2 text-white hover:text-primary transition-colors" onclick="event.stopPropagation(); nextImage()">
      <span class="material-icons-round text-4xl">chevron_right</span>
    </button>
    <img id="lightbox-img" src="" alt="" class="max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl" onclick="event.stopPropagation()" />
  </div>
</section>

<script define:vars={{ achievements }}>
  let currentIndex = 0;
  const images = achievements.map(a => a.image);
  
  window.openLightbox = function(index) {
    currentIndex = index;
    const lightbox = document.getElementById('lightbox');
    const img = document.getElementById('lightbox-img');
    img.src = images[currentIndex];
    lightbox.classList.remove('hidden');
    lightbox.classList.add('flex');
    document.body.style.overflow = 'hidden';
  }
  
  window.closeLightbox = function() {
    const lightbox = document.getElementById('lightbox');
    lightbox.classList.add('hidden');
    lightbox.classList.remove('flex');
    document.body.style.overflow = '';
  }
  
  window.nextImage = function() {
    currentIndex = (currentIndex + 1) % images.length;
    document.getElementById('lightbox-img').src = images[currentIndex];
  }
  
  window.prevImage = function() {
    currentIndex = (currentIndex - 1 + images.length) % images.length;
    document.getElementById('lightbox-img').src = images[currentIndex];
  }
  
  // ESC to close
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeLightbox();
    if (e.key === 'ArrowRight') nextImage();
    if (e.key === 'ArrowLeft') prevImage();
  });
</script>
